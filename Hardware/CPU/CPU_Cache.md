# CPU里的一级，二级，三级缓存，他们之间的关系是什么？是起到同样的作用么？弄这么多缓存有什么好处？

1 核心面积有限
2 能耗问题，一级缓存L1能耗比较大
3 一级缓存L1集成难度高，成品率最低，成本高
4 一级缓存L1、二级缓存L2、三级缓存L3，速度上L1 >L2 >L3
L1和L2与整个核心是一体的，L3则是在核心外部、独立的一块区域
5 L1和L2是独享的（比如是4核心处理器，那么L1和L2就分别有4个，L3就不是4块了，是一整块供4个核心一起使用）-- 海光1号CPU架构设计
6 举例：售价是2200左右的I7 4770K，他有8M的L3缓存，若是直接将L3去掉，集成8M的L1或者L2，那么两千两百块钱的4770K估计要卖到5万多一块，原因有3点，1 成品率大幅下降可能成品率还不到5%，2 成本大幅上升，L1的集成成本是L2的几倍，更别说是L3了，3 是发热和能耗
7 为什么有了L1还要L2和L3，因为内存速度越来越快，物理数据流传输速率有上限，L1和L2不能无限放大，为了减少数据等待时间，那么128K的L1太小了怎么办呢，就有了L2和L3，L3是进行数据缓存的，是防止内存和CPU之间的数据流产生的瓶颈，而L3的成本比较低，如果内存速度进一步提高，肯定还会有L4也就是4级缓存出现
工作原理是CPU先像一级缓存寻找数据，找不到就像2级缓存找，再找不到就往3级缓存找，一般L2的命中率就有60%以上了 
![](https://i.loli.net/2019/08/19/8l3dQLzDhEMvKTZ.jpg)

intel发布会之前，漫谈CPU核心架构：CCX、Ring Bus、Me - - 讲解CCX and Ring Bus
http://www.sohu.com/a/244644078_466942

![](https://i.loli.net/2019/08/19/o7N9JrUQTXYebcI.jpg)